import * as React from 'react';
import { assert } from 'chai';
import { mount } from 'enzyme';

import BasicUserInfo from '../components/basic-user-info';


const user = {
  "firstname": "Debbie",
  "roles": ["admin"],
  "state": "active",
  "lastname": "Rodriguez",
  "dc": {
    "modified": "2016-01-01T21:28:43",
    "created": "2016-01-01T21:28:43"
  },
  "email": "jayward@nguyen-hurst.biz",
  "sso": [
    {"trusted": false, "provider": "azMedien"}
  ],
  "id": "7da35"
};

const makeComponent = () => mount(<BasicUserInfo user={user} />);

describe('<BasicUserInfo />', () => {
  it('shows the user\'s id', () => {
    const wrapper = makeComponent();
    assert.isTrue(wrapper.html().indexOf(user.id) >= 0);
  });

  it('shows the user\'s first name', () => {
    const wrapper = makeComponent();
    assert.isTrue(wrapper.html().indexOf(user.firstname) >= 0);
  });

  it('shows the user\'s last name', () => {
    const wrapper = makeComponent();
    assert.isTrue(wrapper.html().indexOf(user.lastname) >= 0);
  });

  it('shows the user\'s email address', () => {
    const wrapper = makeComponent();
    assert.isTrue(wrapper.html().indexOf(user.email) >= 0);
  });

  it('renders the user\'s email address as a mailto link', () => {
    const wrapper = makeComponent();
    assert.equal(wrapper.find('a').first().props().href, `mailto:${user.email}`);
  });
});
