
const api = (apiName) => window.__swaggerClient.apis[apiName];

/**
 * Creates an API object that operates on the specified swagger interface.
 */
const createApi = (apiName) => ({
  search(params) {
    return new Promise((resolve, reject) => {
      api(apiName).search(params)
        .then((response) => {
          if (response && response.obj) {
            resolve(response.obj);
          } else {
            reject({ error: 'UNKNOWN' });
          }
        })
        .catch((response) => {
          if (response && response.obj) {
            reject(response.obj);
          } else {
            reject({ error: 'UNKNOWN' });
          }
        });
    });
  },

  get(id) {
    return new Promise((resolve, reject) => {
      api(apiName).get({ contentId: id })
        .then((response) => {
          if (response && response.obj) {
            resolve({ data: response.obj.data });
          } else {
            reject({ error: 'UNKNOWN' });
          }
        })
        .catch((response) => {
          if (response && response.obj) {
            reject(response.obj);
          } else {
            reject({ error: 'UNKNOWN' });
          }
        });
    });
  },

  delete(id) {
    return new Promise((resolve, reject) => {
      api(apiName).delete({ contentId: id })
        .then((response) => {
          if (response && response.obj) {
            resolve({ data: response.obj.data });
          } else {
            reject({ error: 'UNKNOWN ' });
          }
        })
        .catch((response) => {
          if (response && response.obj) {
            reject(response.obj);
          } else {
            reject({ error: 'UNKNOWN' });
          }
        });
    });
  },
});

export default createApi;
