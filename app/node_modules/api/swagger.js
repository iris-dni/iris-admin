var Swagger = require('swagger-client');


/**
 * Creates a swagger client from the provided swagger specification.
 * Once the client is ready, it is stored on the window object.
 * The provided callback is called in case of success and failure.
 *
 * @param {string} swaggerJsonUrl  URL to the swagger json specification.
 * @param {Function} callback  The callback that should be called when ready.
 */
export default function initSwagger(swaggerJsonUrl, callback) {
  new Swagger({ url: swaggerJsonUrl, usePromise: true }).then(client => {
    window.__swaggerClient = client;
    callback();
  }).catch(reason => {
    /* eslint-disable no-console */
    console.log(reason);
    callback();
  });
}
