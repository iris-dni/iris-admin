const api = () => window.__swaggerClient.apis.auth;

const UNKNOWN_ERROR = { error: 'UNKNOWN' };


const AuthApi = {
  /**
   * @param {object} params  The parameters that should be passed to the api.
   * @see Swagger API Definition
   */
  whoami(params) {
    return new Promise((resolve, reject) => {
      api().whoami(params).then(response => {
        if (response && response.obj) {
          resolve(response.obj);
        } else {
          reject(UNKNOWN_ERROR);
        }
      }).catch(response => {
        if (response && response.obj) {
          reject(response.obj);
        } else {
          reject(UNKNOWN_ERROR);
        }
      });
    });
  },

  /**
   * Logs out the user.
   */
  logout() {
    return new Promise((resolve, reject) => {
      api().logout().then(response => {
        if (response && response.obj) {
          resolve(response.obj);
        } else {
          reject(UNKNOWN_ERROR);
        }
      }).catch((response) => {
        if (response && response.obj) {
          reject(response.obj);
        } else {
          reject(UNKNOWN_ERROR);
        }
      });
    });
  }
};


export default AuthApi;
