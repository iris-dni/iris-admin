import * as React from 'react';
import { assert } from 'chai';
import { mount } from 'enzyme';

import UrlInput from '../url-input';


describe('<UrlInput />', () => {
  it('calls onAction with "add-url" and the url', () => {
    const handleAction = (action, url) => {
      assert.equal(action, 'add-url');
      assert.equal(url, 'http://example.com');
    };
    const wrapper = mount(<UrlInput onAction={handleAction} />);
    wrapper.find('input').get(0).value = 'http://example.com';
    wrapper.find('button').simulate('click');
  });

  it('empties the input after clicking the button', () => {
    const handleAction = () => {};
    const wrapper = mount(<UrlInput onAction={handleAction} />);
    wrapper.find('input').get(0).value = 'http://example.com';
    wrapper.find('button').simulate('click');
    assert.equal(wrapper.find('input').get(0).value, '');
  });

  it('focuses the input after clicking the button', () => {
    const handleAction = () => {};
    const wrapper = mount(<UrlInput onAction={handleAction} />);
    wrapper.find('button').simulate('click');
    assert.equal(wrapper.find('input').node, document.activeElement);
  });
});
