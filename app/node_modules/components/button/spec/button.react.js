import * as React from 'react';
import { assert } from 'chai';
import { mount } from 'enzyme';

import Button from '../';


describe('<Button />', () => {
  it('renders a <button /> element', () => {
    const wrapper = mount(<Button name="the-button" onAction={() => {}} />);
    assert.equal(wrapper.find('button').length, 1);
  });

  it('calls onAction when it is clicked', (done) => {
    const handleAction = () => { done(); };
    const wrapper = mount(<Button name="the-button" onAction={handleAction} />);
    wrapper.simulate('click');
  });

  it('passes name to onAction', (done) => {
    const handleAction = (name) => {
      assert.equal(name, 'the-button');
      done();
    };
    const wrapper = mount(<Button name="the-button" onAction={handleAction} />);
    wrapper.simulate('click');
  });

  it('does not call onAction if disabled', () => {
    const handleAction = () => {
      assert.fail();
    };
    const wrapper = mount(<Button name="btn" onAction={handleAction} attributes={{ disabled: true }} />);
    wrapper.simulate('click');
  });

  it('defaults to a "default" button variation', () => {
    const wrapper = mount(<Button name="btn" onAction={() => {}} />);
    assert.isTrue(wrapper.find('button').props().className.indexOf('btn-default') >= 0);
  });

  it('"danger" variation renders a danger button', () => {
    const wrapper = mount(<Button name="btn" onAction={() => {}} variation="danger" />);
    assert.isTrue(wrapper.find('button').props().className.indexOf('btn-danger') >= 0);
  });

  it('"primary" variation renders a primary button', () => {
    const wrapper = mount(<Button name="btn" onAction={() => {}} variation="primary" />);
    assert.isTrue(wrapper.find('button').props().className.indexOf('btn-primary') >= 0);
  });

  it('"success" variation renders a success button', () => {
    const wrapper = mount(<Button name="btn" onAction={() => {}} variation="success" />);
    assert.isTrue(wrapper.find('button').props().className.indexOf('btn-success') >= 0);
  });

  it('"info" variation renders a info button', () => {
    const wrapper = mount(<Button name="btn" onAction={() => {}} variation="info" />);
    assert.isTrue(wrapper.find('button').props().className.indexOf('btn-info') >= 0);
  });

  it('"warning" variation renders a warning button', () => {
    const wrapper = mount(<Button name="btn" onAction={() => {}} variation="warning" />);
    assert.isTrue(wrapper.find('button').props().className.indexOf('btn-warning') >= 0);
  });

  it('"link" variation renders a link button', () => {
    const wrapper = mount(<Button name="btn" onAction={() => {}} variation="link" />);
    assert.isTrue(wrapper.find('button').props().className.indexOf('btn-link') >= 0);
  });
});
