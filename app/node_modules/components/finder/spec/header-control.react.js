import * as React from 'react';
import { assert } from 'chai';
import { mount } from 'enzyme';

import HeaderControl from '../header-control';

const columns = [
  { label: 'Column A' },
  { label: 'Column B' },
  { label: 'Column C' }
];

const createHeaderControl = (cols = columns) => mount(
  <table>
    <HeaderControl columns={cols} />
  </table>
);


describe('<HeaderControl /> (Finder)', () => {
  it('renders a <thead /> element', () => {
    const wrapper = createHeaderControl();
    assert.equal(wrapper.find('thead').length, 1);
  });

  it('renders each column as a <th /> element', () => {
    const wrapper = createHeaderControl();
    wrapper.find('th').forEach((node, index) => {
      assert.equal(node.text(), columns[index].label);
    });
  });

  it('passes props to each column header cell', (done) => {
    const handleColumnClick = (e) => {
      assert.equal(e.target.innerHTML, columns[0].label);
      done();
    };
    const wrapper = createHeaderControl(columns.map(c => {
      return Object.assign({}, c, { props: { onClick: handleColumnClick } });
    }));
    wrapper.find('th').first().simulate('click');
  });
});
