import * as React from 'react';
import Helmet from 'react-helmet';
import settings from 'config/settings';
import { isEmpty } from 'helpers/text';

const withTitle = (WrappedComponent) => React.createClass({
  displayName: 'TitleWrapper',

  propTypes: {
    openIssues: React.PropTypes.string
  },

  render() {
    const { openIssues } = this.props;

    let titleTemplate =  `${settings.platform.name}: %s`;
    if (!isEmpty(openIssues)) {
      titleTemplate = `(${openIssues}) ${titleTemplate}`;
    }

    const defaultTitle = titleTemplate.replace('%s', 'Dashboard');

    return (
      <div>
        <Helmet titleTemplate={titleTemplate} defaultTitle={defaultTitle} />
        <WrappedComponent {...this.props} />
      </div>
    );
  }
});

export default withTitle;
