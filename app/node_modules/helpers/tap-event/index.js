import * as React from 'react';


export default (eventName, selector, Component) => React.createClass({
  displayName: `EventTap(${eventName})`,

  componentDidMount() {
    this._tappedElement = document.querySelector(selector);
    if (this._tappedElement) {
      this._tappedElement.addEventListener(eventName, this.handleEvent);
    }
  },

  componentWillUnmount() {
    if (this._tappedElement) {
      this._tappedElement.removeEventListener(eventName, this.handleEvent);
    }
  },

  handleEvent(e) {
    if (this._component) {
      this._component[`handleTappedEvent`](e, eventName, selector);
    }
  },

  render() {
    return (
      <Component ref={n => this._component = n && n} {...this.props}  />
    );
  }
});
